<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="icon" href="/assets/images/logo.png">

<title>在Rails中尽早碾碎N+1查询 | The Tragedy of XY</title>

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>在Rails中尽早碾碎N+1查询 | The Tragedy of XY</title>
<meta name="generator" content="Jekyll v4.1.0" />
<meta property="og:title" content="在Rails中尽早碾碎N+1查询" />
<meta name="author" content="Mr.Z" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="本文已获得原作者（Vladimir Dementyev）和 Evil Martians 授权许可进行翻译。原文介绍了 对于 Rails 中经典的 N+1 问题，我们通常使用的 Bullet 的局限性，以及如何运用 n_plus_one_control 以测试的方式来尽早发现 N+1 查询。" />
<meta property="og:description" content="本文已获得原作者（Vladimir Dementyev）和 Evil Martians 授权许可进行翻译。原文介绍了 对于 Rails 中经典的 N+1 问题，我们通常使用的 Bullet 的局限性，以及如何运用 n_plus_one_control 以测试的方式来尽早发现 N+1 查询。" />
<meta property="og:site_name" content="The Tragedy of XY" />
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/xfyuan/ossimgs@master/uPic/IMG_20201027_125936.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-10-31T00:00:00+00:00" />
<script type="application/ld+json">
{"dateModified":"2020-10-31T00:00:00+00:00","datePublished":"2020-10-31T00:00:00+00:00","description":"本文已获得原作者（Vladimir Dementyev）和 Evil Martians 授权许可进行翻译。原文介绍了 对于 Rails 中经典的 N+1 问题，我们通常使用的 Bullet 的局限性，以及如何运用 n_plus_one_control 以测试的方式来尽早发现 N+1 查询。","url":"/2020/10/squash-n-plus-one-queries-in-rails/","@type":"BlogPosting","image":"https://cdn.jsdelivr.net/gh/xfyuan/ossimgs@master/uPic/IMG_20201027_125936.jpg","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/images/logo.png"},"name":"Mr.Z"},"mainEntityOfPage":{"@type":"WebPage","@id":"/2020/10/squash-n-plus-one-queries-in-rails/"},"author":{"@type":"Person","name":"Mr.Z"},"headline":"在Rails中尽早碾碎N+1查询","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


<link href="/assets/css/prism.css" rel="stylesheet">

<link href="/assets/css/theme.css" rel="stylesheet">

<script src="/assets/js/jquery.min.js"></script>

</head>




<body>
	<!-- defer loading of font and font awesome -->
	<noscript id="deferred-styles">
		<link href="https://fonts.googleapis.com/css?family=Sen:400,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	</noscript>

<!-- Begin Sidebar Navigation
================================================== -->

<div class="sidebar">
</div>
<div class="nav-icon">
    <div class="hamburger-bar"></div>
</div>
<div id="blackover-nav" class="blackover"></div>
<nav id="menu">
    <ul>
        <h3>Navigation</h3>
        <li><a href="/">Home</a></li>
        <li><a href="/categories">Categories</a></li>
        <li><a href="/about">About</a></li>
    </ul>
</nav>

<script src="/assets/js/lunr.js"></script>

<style>
    
</style>

<div class="wrap-search">
    <div class="d-flex align-items-center ml-auto">
        <i class="fas fa-search show-search"></i>
        <form class="bd-search ml-3" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
            <input type="text" class="form-control bigradius text-small launch-modal-search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Type and enter..."/>
        </form>
    </div>
</div>

<div id="lunrsearchresults">
    <ul></ul>
</div>

<script src="/assets/js/lunrsearchengine.js"></script>


<!-- End Sidebar Navigation
================================================== -->

<div class="site-content ">

<div class="container">

    <!-- Site Logo/Name
    ================================================== -->

    <a class="navbar-brand" href="/">
        <img src="/assets/images/logo.png" alt="The Tragedy of XY">
    </a>


    <!-- Site Tag
    ================================================== -->
    

    <!-- Content
    ================================================== -->
    <div class="main-content">
        <div class="entry-header">
    <!-- Post Title -->
    <h1 class="posttitle">在Rails中尽早碾碎N+1查询</h1>
    <!-- Author & Date  Box -->
    
    
    <div class="d-flex align-items-center mt-4">
        <div>
            
            <img class="author-thumb" src="/assets/images/avatar.png" alt="Mr.Z">
            
        </div>            
        <div>
        Written by <a target="_blank" class="text-dark" href="https://xfyuan.github.io">Mr.Z</a> on 
        <span class="post-date"><time class="post-date" datetime="2020-10-31">31 Oct 2020</time></span>           
        
        </div>            
    </div>
    
</div>

<!-- Adsense under title if enabled from _config.yml (change your pub id and slot) -->


<!-- Featured Image -->

<div class="entry-featured-image">
    
    <img class="featured-image lazyimg " src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/xfyuan/ossimgs@master/uPic/IMG_20201027_125936.jpg" alt="在Rails中尽早碾碎N+1查询">
    
</div>


<!-- Content -->
<!-- Post, Page Content
================================================== -->
<div class="article-post">
    <!-- Toc if any -->
    
    <!-- End Toc -->
    <p><em>本文已获得原作者（Vladimir Dementyev）和 Evil Martians 授权许可进行翻译。原文介绍了 对于 Rails 中经典的 N+1 问题，我们通常使用的 Bullet 的局限性，以及如何运用 <a href="https://github.com/palkan/n_plus_one_control">n_plus_one_control</a> 以测试的方式来尽早发现 N+1 查询。</em></p>

<ul>
  <li>原文链接：<a href="https://evilmartians.com/chronicles/squash-n-plus-one-queries-early-with-n-plus-one-control-test-matchers-for-ruby-and-rails">Squash N+1 queries early with n_plus_one_control test matchers for Ruby and Rails</a></li>
  <li>作者：<a href="https://twitter.com/palkan_tula">Vladimir Dementyev</a></li>
  <li>站点：Evil Martians ——位于纽约和俄罗斯的 Ruby on Rails 开发人员博客。 它发布了许多优秀的文章，并且是不少 gem 的赞助商。</li>
</ul>

<p><em>【正文如下】</em></p>

<h2 id="引言">引言</h2>

<p><strong>发现一种面向测试的替代方案，在开发中的冗余数据库调用之前，就检测你的 Rails 和纯 Ruby 应用程序中的 N+1 查询问题。<a href="https://github.com/palkan/n_plus_one_control">n_plus_one_control</a> gem 的工作方式与 Bullet 等众所周知的工具不同，能确保额外的 SQL 查询永远不被忽略，且与你对 ORM 工具的选择无关。</strong></p>

<p><em>我假定本文读者是了解 N+1 查询问题的。如果不是，可从我们的一篇<a href="https://evilmartians.com/chronicles/fighting-the-hydra-of-n-plus-one-queries">介绍文章</a>开始，该文展示了 Evil Martians 更早开发的另一个测试工具。</em></p>

<p>每个使用 ORM（如 Active Record）与数据库进行工作的后端 Ruby 开发者都知道：需要小心你的数据库查询，以免生成太多 Query。即使 N+1 问题众所周知，但我们仍然不可能每次都比 ORM 聪明：即我们需要一种自动化方式来指明问题。</p>

<p>在过去三年，我一直使用自己的小工具尽可能在更早的场合下就检测到 N+1 问题：在运行 RSpec 或 Minitest 的时候。我的 <a href="https://github.com/palkan/n_plus_one_control">n_plus_one_control</a> gem 一直在缓慢地逐步完善，最近来到了 <a href="https://github.com/palkan/n_plus_one_control/releases/tag/v0.5.0">0.5.0</a> 版本，因此我觉得是时候向各位展示它，以及我的解决方案与其他常见工具的不同之处了。</p>

<h2 id="biting-the-bullet">Biting the bullet</h2>

<p>你可能想知道已经有了 <a href="https://github.com/flyerhzm/bullet">Bullet</a> gem 为什么我还要创建另一个库来检测 N+1 问题呢？让我来分享一个小故事。</p>

<p>我已使用 Bullet 许多年了：首先，是在开发环境和 staging 环境中，像我们大多数人一样。但在某个时候，我意识到测试环境更适合用来检测和防止 N+1 问题。通过一些小修小补，让 Bullet 在测试环境下工作起来是可行的。如下代码示例创建了一个可用于 spec 的<code>bulletify</code>帮助方法。</p>

<pre><code class="language-ruby"># spec/shared_contexts/bulletify.rb
RSpec.shared_context "bullet" do
  before(:each) do
    Bullet.enable = true
    Bullet.bullet_logger = true
    Bullet.raise = true # raise an error if N+1 query occurs
    Bullet.start_request
  end

  after(:each) do
    Bullet.perform_out_of_channel_notifications if Bullet.notification?
    Bullet.end_request
    Bullet.enable = false
    Bullet.bullet_logger = false
    Bullet.raise = false
  end
end

RSpec.configure do |config|
  config.include_context "bullet", bullet: true
  config.alias_example_to :bulletify, bullet: true
end

# spec/controllers/my_controller_spec.rb
context "N+1" do
  bulletify { get :index }
end
</code></pre>

<p>然而在多个成熟的 Rails 应用程序的工作中，我发现当数据库交互超越 Active Record 及其关联关系时，Bullet 并不能发现问题。<a href="https://github.com/flyerhzm/bullet/issues?q=is%3Aissue+is%3Aopen+false+positive">False positives</a> 也是相当的常见。</p>

<p>这有一个范例，使用了上面的<code>bulletify</code>方法：</p>

<pre><code class="language-ruby"># user.rb
class User &lt; ApplicationRecord
  has_many :teams

  def supports?(team_name)
    teams.where(name: team_name).exists?
  end
end
</code></pre>

<pre><code class="language-erb">&lt;!-- users/index.html.erb --&gt;
&lt;% @users.each do |user| %&gt;
  &lt;li class="&lt;%= user.supports?("FC Spartak Moscow") &amp;&amp; "red-white" %&gt;"&gt;
    &lt;%= user.name %&gt;
  &lt;/li&gt;
&lt;% end %&gt;
</code></pre>

<pre><code class="language-ruby"># users_controller_spec.rb
describe "GET #index" do
  render_views

  let!(:users) { create_pair(:user, :with_teams) }

  bulletify { get :index }
end
</code></pre>

<p>即使我们在这儿明显有了 N+1 查询（来自于<code>#supports?</code>方法），测试却仍然是绿色通过的。</p>

<h2 id="running-and-counting">Running and counting</h2>

<p>我就开始考虑一种检测 N+1 查询的更健壮的方式，与 Active Record 内部无关的方式。</p>

<p><strong>而最终我找到了这样的思路：如果我们运行同样的代码两次，以不同数量的数据库记录，并比较所执行 SQL 查询的次数呢？</strong></p>

<p>如果这个数字不依赖于测试集的大小，我们便没有（N+1）问题。否则，看起来就是有一个 <em>XN+Y</em> 了。</p>

<p>这个想法在 <a href="https://github.com/palkan/n_plus_one_control">n_plus_one_control</a> gem 中得以实现，它为你所选择的 Ruby 测试框架添加 N+1 检测的 DSL。下面是 RSpec 的示例：</p>

<pre><code class="language-ruby">context "N+1", :n_plus_one do
  # Populate block is called multiple times
  # with different values of n (2 and 3 by default)
  populate { |n| create_list(:user, n, :with_teams) }

  specify do
    # The example body is executed
    #after each `populate` call
    expect { get :index }.to perform_constant_number_of_queries
  end
end
</code></pre>

<p>而测试将以如下消息报失败：</p>

<pre><code class="language-bash">Expected to make the same number of queries, but got:
  3 for N=2
  4 for N=3
</code></pre>

<h2 id="search-and-destroy-n1-violations">Search and destroy N+1 violations</h2>

<p><a href="https://github.com/palkan/n_plus_one_control/releases/tag/v0.5.0">最新版本</a>中，我把重点放在了开发体验上，帮助开发者不仅检测 N+1 问题，还能方便地在大型应用程序中找到惹出问题的“元凶”。</p>

<p>当处理优化工作时，我认识到仅仅拥有测试因 N+1 而报失败是不够的（能知道这问题的存在要感谢性能监测系统）。所以，我已经开始为这个 gem 添加新的特性，即以如下计划发现 N+1 问题：</p>

<h3 id="step-1-write-a-test-that-fails">Step 1: Write a test that fails</h3>

<p>创建一个好的性能测试可不容易。我们需要所涉及的数据，各种设置，来覆盖多数代码路径，这样才不会遗失任何不期望的数据库交互。比如：</p>

<pre><code class="language-ruby"># This example uses Minitest
class PerformanceTest &lt; ApplicationIntegrationTestCase
  def populate(scale_factor)
    scale_factor.times do
      # Here, I'm not using create_list but introducing some
      # randomness instead.
      # That would make our setup less deterministic
      # (and, thus, test more valuable)
      create(:resource, :with_tags, tags_num: [0, 1, 2].sample)
    end
    create_list(:document, scale_factor)
  end

  test "should not produce N+1 queries" do
    assert_perform_constant_number_of_queries do
      get :index
    end
  end
end
</code></pre>

<p>输出看起来会是这样：</p>

<pre><code class="language-bash">Expected to make the same number of queries, but got:
  10 for N=2
  11 for N=3
Unmatched query numbers by tables:
  resources (SELECT): 2 != 3
  permissions (SELECT): 4 != 6
</code></pre>

<p><strong>注意：</strong>即使我们没有看到上面的<em><code>documents</code></em> 列表，也不要移除设置中的这个部分：N+1 问题可能会在将来遇到，所以我们应该做好准备。</p>

<h3 id="step-2-localize-the-problem">Step 2: Localize the problem</h3>

<p>根据上面的错误信息，我们可以看到有两个影响到的表。让我们通过使用查询筛选的特性，来对每个测试单独重新运行。我们也可启用明细输出模式以获得所收集到的查询列表及其来自哪里：</p>

<pre><code class="language-bash">$ NPLUSONE_VERBOSE=1 \
  NPLUSONE_FILTER=resources \
  bundle exec rails test

Expected to make the same number of queries, but got:
  2 for N=2
  3 for N=3
Unmatched query numbers by tables:
  resources (SELECT): 2 != 3
Queries for N=2
   SELECT "resources".* FROM "resources" WHERE "resources"."deleted_at" IS NULL
   ↳ app/controllers/resources_controller.rb:32:in `index'
   ...
Queries for N=3
   ...
</code></pre>

<p>再重复第二个表的：</p>

<pre><code class="language-bash">$ NPLUSONE_VERBOSE=1 \
  NPLUSONE_FILTER=permissions \
  bundle exec rails test

Expected to make the same number of queries, but got:
  4 for N=2
  6 for N=3
Unmatched query numbers by tables:
  permissions (SELECT): 4 != 6
Queries for N=2
  SELECT "permissions".* FROM "permissions" WHERE "permissions.user_id" = 42 AND "permissions.resource_id" = 15 AND "permissions.grants" @&gt; '{manage}'
  ↳ app/policies/resource_policy.rb:41:in `update?'
  SELECT "permissions".* FROM "permissions" WHERE "permissions.user_id" = 42 AND "permissions.resource_id" = 15 AND "permissions.grants" @&gt; '{invite}'
  ↳ app/policies/resource_policy.rb:56:in `invite?'
  ...
Queries for N=3
  ...
</code></pre>

<p>有时，查询会太长，让我们的输出难以阅读。那么我们可以通过设置<code>NPLUSONE_TRUNCATE</code>环境变量只显示查询的前 N 个字符。</p>

<p>还有，仅显示堆栈的单独一行可能没那么有用。不用担心！你可以通过<code>NPLUSONE_BACKTRACE</code>变量来增加堆栈行数显示的数量。</p>

<p>因此，最终的命令看起来会是这样：</p>

<pre><code class="language-bash">NPLUSONE_VERBOSE=1 \
NPLUSONE_FILTER=permissions \
NPLUSONE_TRUNCATE=100 \
NPLUSONE_BACKTRACE=5 \
bundle exec rails test
</code></pre>

<p>总结一下，通过<a href="https://github.com/palkan/n_plus_one_control">n_plus_one_control</a>，你可以通过编写测试并以不同参数运行多次来快速识别出任何一种 N+1 查询的根源。而在你修复所有这些问题后，这种检测就成为一种回归测试——阻止你的代码在将来再出问题的测试！</p>


</div>

<!-- Rating -->


<!-- Author Box if enabled from _config.yml -->
<!-- Author Box -->


<div class="d-flex authorbox align-items-center">
    <div class="col-md-2 mr-4 text-center">
        
        <img class="author-thumb" src="/assets/images/avatar.png" alt="Mr.Z">
        
    </div>
    <div class="col-md-10"> 
        <a target="_blank" class="text-dark h4" href="https://xfyuan.github.io">About Mr.Z</a>   <a target="_blank" href="https://twitter.com/apexy" class="btn-sm"><i class="fab fa-twitter"></i></a>        
        <span class="author-description d-block mt-2">A Chinese software engineer living and working in Chengdu. I love Creating the future in digital worlds, big and small.</span>            
    </div>
</div>



<!-- Comments if not disabled with comments: false -->
<!-- Comments
================================================== -->
 
<div class="comments">
    <button class="btn btn-dark show-comments">Load Comments</button>         
    <div id="comments">  
        <h4 class="mb-4">Comments</h4>                 
            <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'xfyuan'; 
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = window.location.protocol + '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>
     
    <div class="clearfix"></div>              
    </div>    
</div>       


<!-- Share -->
<div class="share">
    <p>
        Share
    </p>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=在Rails中尽早碾碎N+1查询&url=/2020/10/squash-n-plus-one-queries-in-rails/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fab fa-twitter"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://facebook.com/sharer.php?u=/2020/10/squash-n-plus-one-queries-in-rails/" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                <i class="fab fa-facebook-f"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=/2020/10/squash-n-plus-one-queries-in-rails/" onclick="window.open(this.href, 'width=550,height=435');return false;">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </li>

    </ul>
</div>


<!-- Related Post -->
<!-- Related Posts
================================================== -->
<div class=" related-posts ">  

    
    <h2 class="text-center mb-4">Explore more like this</h2>
    
    
    <div class="d-flex justify-content-center align-items-center">
    
    <!-- Categories -->
    
    
    <a class="smoothscroll badge badge-primary text-capitalize" href="/categories#Programming">Programming</a>                
    
    <a class="smoothscroll badge badge-primary text-capitalize" href="/categories#Translation">Translation</a>                
    

    <!-- Tags -->  
    
                    
    <a class="smoothscroll badge badge-primary text-capitalize" href="/tags#minitest">minitest</a>               
                    
    <a class="smoothscroll badge badge-primary text-capitalize" href="/tags#rails">rails</a>               
                    
    <a class="smoothscroll badge badge-primary text-capitalize" href="/tags#rspec">rspec</a>               
                    
    <a class="smoothscroll badge badge-primary text-capitalize" href="/tags#ruby">ruby</a>               
    

    </div>

    
    
    
    <div class="blog-grid-container">
        
        
            
            
        
            
        
            
            <!-- begin post -->


<div class="blog-grid-item">
    <div class="card h-100">
        <div class="maxthumb">
            <a href="/2021/04/hotwire-reactive-rails-with-no-javascript/">
                

                    
                        <img class="img-thumb lazyimg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/xfyuan/ossimgs@master/uPic/IMG_20210220_121324.jpg" alt="Hotwire: 没有JavaScript的Reactive Rails">
                    

                
            </a>
        </div>
        <div class="card-body">
            <h2 class="card-title">
                <a class="text-dark" href="/2021/04/hotwire-reactive-rails-with-no-javascript/">Hotwire: 没有JavaScript的Reactive Rails</a>
                
                <div class="mb-2 mt-2 font-weight-normal">
                <div class="rating-holder">
<div class="c-rating c-rating--regular" data-rating-value="5">
  <button>1</button>
  <button>2</button>
  <button>3</button>
  <button>4</button>
  <button>5</button>
</div>
</div>
                </div>
                
            </h2>
            <h4 class="card-text">本文已获得原作者（Vladimir Dementyev）和 Evil Martians 授权许可进行翻译。原文介绍了 Rails 的最新“魔法”：Hotwire。这也是 Vladimir Dementyev 在 RailsConf 2021 上的演讲内容。
</h4>
        </div>
        <div class="card-footer bg-white">
            <div class="wrapfooter">
                
                <span class="meta-footer-thumb">
                
                <img class="author-thumb" src="/assets/images/avatar.png" alt="Mr.Z">
                
                </span>
                <span class="author-meta">
                <span class="post-name"><a target="_blank" href="https://xfyuan.github.io">Mr.Z</a></span> 
                
                <span class="post-date">24 Apr 2021</span>
                </span>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
</div>
<!-- end post -->
            
            
            
        
        
        
            
            
        
            
        
            
            <!-- begin post -->


<div class="blog-grid-item">
    <div class="card h-100">
        <div class="maxthumb">
            <a href="/2021/04/the-foundation-of-how-tailwindcss-works/">
                

                    
                        <img class="img-thumb lazyimg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/xfyuan/ossimgs@master/uPic/IMG_20210220_115551.jpg" alt="Tailwindcss底层基石的理念">
                    

                
            </a>
        </div>
        <div class="card-body">
            <h2 class="card-title">
                <a class="text-dark" href="/2021/04/the-foundation-of-how-tailwindcss-works/">Tailwindcss底层基石的理念</a>
                
            </h2>
            <h4 class="card-text">Tailwindcss 从 2019 年开始逐渐在国外的 Web 开发圈子内盛行起来。国内倒是至今仍然不温不火。2020 年的 Ruby China 上过纯中做过一次在项目上使用 tailwindcss 体验的有关演讲。我在 2020 年也写过一篇有关的博客“在 Rails 6 中整合 Stimulus 和 Tailwind CSS”（被前者在演讲中所引用^_^）。
</h4>
        </div>
        <div class="card-footer bg-white">
            <div class="wrapfooter">
                
                <span class="meta-footer-thumb">
                
                <img class="author-thumb" src="/assets/images/avatar.png" alt="Mr.Z">
                
                </span>
                <span class="author-meta">
                <span class="post-name"><a target="_blank" href="https://xfyuan.github.io">Mr.Z</a></span> 
                
                <span class="post-date">10 Apr 2021</span>
                </span>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
</div>
<!-- end post -->
            
            
            
        
        
        
            
            
        
            
        
            
            <!-- begin post -->


<div class="blog-grid-item">
    <div class="card h-100">
        <div class="maxthumb">
            <a href="/2021/03/hotwire-build-turbo-application/">
                

                    
                        <img class="img-thumb lazyimg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/xfyuan/ossimgs@master/uPic/IMG_20210220_133340.jpg" alt="Hotwire之构建Turbo应用">
                    

                
            </a>
        </div>
        <div class="card-body">
            <h2 class="card-title">
                <a class="text-dark" href="/2021/03/hotwire-build-turbo-application/">Hotwire之构建Turbo应用</a>
                
            </h2>
            <h4 class="card-text">本文是对构建 Turbo 应用的具体描述，原文出自：https://turbo.hotwire.dev/handbook/building。
</h4>
        </div>
        <div class="card-footer bg-white">
            <div class="wrapfooter">
                
                <span class="meta-footer-thumb">
                
                <img class="author-thumb" src="/assets/images/avatar.png" alt="Mr.Z">
                
                </span>
                <span class="author-meta">
                <span class="post-name"><a target="_blank" href="https://xfyuan.github.io">Mr.Z</a></span> 
                
                <span class="post-date">26 Mar 2021</span>
                </span>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
</div>
<!-- end post -->
            
            
                
        </div>        
</div>

<!-- Review with LD-JSON, adapt it for your needs if you like, but make sure you test the generated HTML source code first: 
https://search.google.com/structured-data/testing-tool/u/0/
================================================== -->

    </div>

    

</div>

<!-- Begin Footer
================================================== -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-12 text-center text-lg-left">
                Copyright © 2021 The Tragedy of XY
            </div>
            <div class="col-md-6 col-sm-12 text-center text-lg-right">
                <a target="_blank" href="https://www.wowthemes.net/memoirs-free-jekyll-theme/">Memoirs Jekyll Theme</a>
            </div>
        </div>
    </div>
</footer>
<!-- End Footer
================================================== -->

</div> <!-- /.site-content -->

<!-- Scripts (if you need bootstrap.js, please add it yourself. I didn't use it for performance reasons, it was not needed in this theme)
================================================== -->

<script src="/assets/js/prism.js"></script>

<script src="/assets/js/theme.js"></script>


<script src="/assets/js/lazyload.js"></script>



<script id="dsq-count-scr" src="//xfyuan.disqus.com/count.js"></script>


</body>
</html>
